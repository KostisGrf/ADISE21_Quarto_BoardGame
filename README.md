# ADISE21_Quarto_BoardGame
An implementation of the board game Quarto

#

   * [Εγκατάσταση](#εγκατάσταση)
      * [Απαιτήσεις](#απαιτήσεις)
      * [Οδηγίες Εγκατάστασης](#οδηγίες-εγκατάστασης)
   * [Περιγραφή API](#περιγραφή-api)
      * [Methods](#methods)
         * [Board](#board)
         * [Piece](#piece)
         * [Player](#player)
         * [Status](#status)
      * [Entities](#entities)
         * [Board](#board-1)
         * [Pieces](#pieces)
         * [Players](#players)
         * [Game_status](#game_status)


# Demo Page

Μπορείτε να κατεβάσετε τοπικά ή να επισκεφτείτε την σελίδα: 
https://users.it.teithe.gr/~it185174/ADISE21_Quarto_BoardGame/www/



# Εγκατάσταση

## Απαιτήσεις

* Apache2
* Mysql Server
* php

## Οδηγίες Εγκατάστασης

 * Κάντε clone το project σε κάποιον φάκελο <br/>
  `$ git clone https://github.com/iee-ihu-gr-course1941/ADISE21_Quarto_BoardGame.git`

 * Βεβαιωθείτε ότι ο φάκελος είναι προσβάσιμος από τον Apache Server. πιθανόν να χρειαστεί να καθορίσετε τις παρακάτω ρυθμίσεις.

 * Θα πρέπει να δημιουργήσετε στην Mysql την βάση με όνομα 'quarto_adise' και να φορτώσετε σε αυτήν την βάση τα δεδομένα από το αρχείο schema.sql

 * Θα πρέπει να φτιάξετε το αρχείο lib/db_upass.php το οποίο να περιέχει:
```
    <?php
    $DB_USER = 'όνομα χρήστη';
	$DB_PASS = 'κωδικός';
    ?>
```

# Περιγραφή Παιχνιδιού

Το Quarto είναι ένα επιτραπέζιο παιχνίδι για δύο παίκτες που εφευρέθηκε από τον Ελβετό μαθηματικό Blaise Müller.
Το παιχνίδι παίζεται σε ταμπλό 4×4.Υπάρχουν 16 μοναδικά πιόνια καθένα από τα οποία είναι:

* Ψηλό ή Κοντό
* Μαύρο ή Άσπρο 
* Tετράγωνο ή Kυκλικό
* Βαθουλωτή κορυφή ή Συμπαγής κορυφή.

Οι παίκτες διαλέγουν εκ περιτροπής ένα πιόνι το οποίο πρέπει να τοποθετήσει ο άλλος παίκτης στο ταμπλό. Ένας παίκτης κερδίζει τοποθετώντας ένα πιόνι στον πίνακα που σχηματίζει μια οριζόντια, κάθετη ή διαγώνια σειρά τεσσάρων πιονιών, τα οποία έχουν όλα μια κοινή ιδιότητα (όλα κοντά, όλα κυκλικά κ.λπ.).



Η εφαρμογή είναι πλήρως αναπτυγμένη για Player vs Player ωστόσο δεν υποστιρίζει πολλά σύγχρονα παιχνίδια(Μόνο δύο παίκτες την φορά).

# Συντελεστές

Full-stack : Γράτσος Κωνσταντίνος


# Περιγραφή API
Οι κλήσεις γίνονται στο /api.php/
## Methods


### Board
#### Ανάγνωση Board

```
GET /board/
```

Επιστρέφει το [Board](#Board).

#### Αρχικοποίηση Board
```
POST /board/
```

Αρχικοποιεί το Board, δηλαδή το παιχνίδι. Γίνονται reset τα πάντα σε σχέση με το παιχνίδι.
Επιστρέφει το [Board](#Board).


#### Ανάγνωση Θέσης/Πιονιού

```
GET /board/piece/
```
Json Data:

| Field             | Description             | Required   |
| ----------------- | ------------------------| ---------- |
| `x`               | Η θέση x                | yes        |
| `y`               | Η θέση y                | yes        |

Επιστρέφει τα στοιχεία από το [Board](#Board-1) με συντεταγμένες x,y.
Περιλαμβάνει το piece_id αν υπάρχει.

### Piece

#### Ανάγνωση επιλεγμένου(selected) πιονιού
```
GET /piece/select/
```


#### Επιλογή Πιονιού για τον αντίπαλο

```
POST /piece/select/
```
Json Data:

| Field             | Description                 | Required   |
| ----------------- | --------------------------- | ---------- |
| `piece_id`        | Το id του πιονιού    | yes        |

Ελέγχεται αν το πιόνι είναι διαθέσιμο καθώς και αν είναι η σειρά του παίκτη να παίξει με βάση το token.




#### Μεταβολή επιλεγμένου(selected) πιονιού

```
POST /piece/move/
```
Json Data:

| Field             | Description                 | Required   |
| ----------------- | --------------------------- | ---------- |
| `x`               | Η θέση x στο Board          | yes        |
| `y`               | Η θέση y στο Board          | yes        |

Κάνει την κίνηση του πιονιού που ειναι επιλεγμένο στην νέα θέση. Προφανώς ελέγχεται η κίνηση αν είναι νόμιμη,αν έχει επιλεχθεί πιόνι καθώς και αν είναι η σειρά του παίκτη να παίξει με βάση το token.

#### Ανάγνωση διαθέσιμων πιονιών
```
/piece/available
```
Επιστρέφει τα στοιχεία των διαθέσιμων πιονιών(Αυτά που δεν έχουν πεχτεί στο board).

### Player

#### Ανάγνωση στοιχείων παίκτη
```
GET /players/:p
```

Επιστρέφει τα στοιχεία του παίκτη p ή όλων των παικτών αν παραληφθεί. Το p μπορεί να είναι '1' ή '2'.

#### Καθορισμός στοιχείων παίκτη
```
PUT /players/
```
Json Data:

| Field             | Description                 | Required   |
| ----------------- | --------------------------- | ---------- |
| `username`        | Το username για τον παίκτη |yes         |



Επιστρέφει τα στοιχεία του παίκτη και ένα token. Το token πρέπει να το χρησιμοποιεί ο παίκτης καθόλη τη διάρκεια του παιχνιδιού.

### Status

#### Ανάγνωση κατάστασης παιχνιδιού
```
GET /status/
```

Επιστρέφει το στοιχείο [Game_status](#Game_status).



## Entities


### Board
---------

Το board είναι ένας πίνακας, ο οποίος στο κάθε στοιχείο έχει τα παρακάτω:


| Attribute                | Description                                  | Values                              |
| ------------------------ | -------------------------------------------- | ----------------------------------- |
| `x`                      | H συντεταγμένη x του τετραγώνου              | 1..4                               |
| `y`                      | H συντεταγμένη y του τετραγώνου              | 1..4                              |
| `piece_id`                  | To Πιόνι που υπάρχει στο τετράγωνο           | 1-16, null       |

### Pieces
---------
Τα pieces έχουν τα παρακώτω στοιχεία:


| Attribute                | Description                                  | Values                              |
| ------------------------ | -------------------------------------------- | ----------------------------------- |
| `id  `               | Το id του πιονιού             | INT     |
| `round_shape`                 | Το χαρακηριστικό του πιονιού τετράγωνο  ή κυκλικό       | 0,1                              |
| `big_shape`                 | Το χαρακηριστικό του πιονιού μικρό ή μεγάλο    | 0,1                              |
| `light_color`                 | Το χαρακηριστικό του πιονιού μαύρο ή άσπρο      | 0,1                              |
| `top_hole`                 | Το χαρακηριστικό του πιονιού Συμπαγής κορυφή ή Βαθουλωτή κορυφή .     | 0,1                              |


### Players
---------

O κάθε παίκτης έχει τα παρακάτω στοιχεία:


| Attribute                | Description                                  | Values                              |
| ------------------------ | -------------------------------------------- | ----------------------------------- |
| `id`            | To id του παίκτη  | 1,2
| `username`               | Όνομα παίκτη                                 | String                              |                            |
| `token  `                | To κρυφό token του παίκτη. Επιστρέφεται μόνο τη στιγμή της εισόδου του παίκτη στο παιχνίδι | HEX |
| `last_action`               | Τελευταία αλλαγή του παίκτη                                  | 


### Game_status
---------

H κατάσταση παιχνιδιού έχει τα παρακάτω στοιχεία:


| Attribute                | Description                                  | Values                              |
| ------------------------ | -------------------------------------------- | ----------------------------------- |
| `status  `               | Κατάσταση             | 'not active', 'initialized', 'started', 'ended', 'aborded'     |
| `p_turn`                 | To id του παίκτη που παίζει        | 1,2,null                              |
| `selected_piece`                 | To id του πιονιού που έχει επιλεχθεί        | 1-16,null                              |
| `result`                 |  To id του παίκτη που κέρδισε ή σε περίπτωση που βγει ισοπαλία |1,2,'D',null                              |
| `last_change`            | Τελευταία αλλαγή/ενέργεια στην κατάσταση του παιχνιδιού         | timestamp |
